!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.galry=b()}(this,function(){"use strict";function a(a,b){function c(){x.setOptions(b),o=f(a),d()}function d(){q=document.createElement("ul"),r=[],s=document.createElement("div"),t=document.createElement("a"),u=document.createElement("a"),v=0,p=o.getElementsByClassName(w.styles.elementsClassName);for(var a=0;a<p.length;a++){p[a].addEventListener("click",m,!1),p[a].setAttribute("data-id",a);var b=document.createElement("li"),c=document.createElement("img");q.appendChild(b),q.classList.add(w.styles.maximizedGalleryClassName),r.push(b),b.appendChild(c),b.classList.add(w.styles.elementsClassName),c.addEventListener("load",e),c.src=p[a].href}s.classList.add(w.styles.maximizedLayerClassName),s.classList.add(w.styles.maximizedLayerHiddenClassName),document.body.appendChild(s),s.appendChild(q),t.classList.add(w.styles.controlNextClassName),u.classList.add(w.styles.controlPrevClassName),s.appendChild(t),s.appendChild(u),i(),w.showThumbPanel&&"undefined"!=typeof x.thumbPanel&&x.thumbPanel.init(),w.activteTouch&&"undefined"!=typeof x.touch&&(console.log("touch"),x.touch.init());var d=new CustomEvent("ready");o.dispatchEvent(d)}function e(a){var b=a.target;b.style.maxHeight=b.naturalHeight+"px",b.style.maxWidth=b.naturalWidth+"px"}function f(a){if("string"==typeof a)return document.getElementById(a);if("object"==typeof a)return a;throw"Could not find the gallery element. Please provide either an id-string, or the object itself"}function g(a){27==a.keyCode?x.minimize():38==a.keyCode||39==a.keyCode?x.next():(37==a.keyCode||40==a.keyCode)&&x.prev()}function h(a){"IMG"!==a.target.nodeName&&"A"!==a.target.nodeName&&x.minimize()}function i(){document.addEventListener("keydown",g),s.addEventListener("DOMMouseScroll",n),s.addEventListener("mousewheel",n),s.addEventListener("click",h),t.addEventListener("click",x.next),u.addEventListener("click",x.prev)}function j(){document.removeEventListener("keydown",g),s.removeEventListener("DOMMouseScroll",n),s.removeEventListener("mousewheel",n),s.removeEventListener("click",h)}function k(a){return a+1>=p.length?0:a+1}function l(a){return 0>=a?p.length-1:a-1}function m(a){a.preventDefault(),x.maximize(a.currentTarget)}function n(a){a.preventDefault(),Math.max(-1,Math.min(1,a.wheelDelta||-a.detail))>0?x.prev():x.next()}var o,p,q,r,s,t,u,v,w={styles:{elementsClassName:"gal-item",maximizedLayerHiddenClassName:"hidden",maximizedLayerClassName:"gal-maximized-layer",currentMaximizedImageClassName:"gal-current-max",nextMaximizedImageClassName:"gal-next-max",prevMaximizedImageClassName:"gal-prev-max",controlNextClassName:"gal-control-next",controlPrevClassName:"gal-control-prev",thumbPanelClassName:"gal-thumb-panel",maximizedGalleryClassName:"gal-maximized-gallery",closeButtonClassName:"gal-close-button",topBarClassName:"gal-top-bar"},closeButtonText:"close",showThumbPanel:!0,activteTouch:!0},x=this;x.setOptions=function(a){for(var b in a)w[b]&&(w[b]=a[b])},x.destroy=function(){w.showThumbPanel&&"undefined"!=typeof x.thumbPanel&&x.thumbPanel.destroy(),j(),document.body.removeChild(s)},x.getGalleryDomNode=function(){return o},x.addEventListener=function(a,b){o.addEventListener(a,b)},x.removeEventListener=function(a,b){o.removeEventListener(a,b)},x.maximize=function(a){"number"==typeof a&&(a=p[a]);var b=parseInt(a.getAttribute("data-id"),10);r[v].classList.remove(w.styles.currentMaximizedImageClassName),r[l(v)].classList.remove(w.styles.prevMaximizedImageClassName),r[k(v)].classList.remove(w.styles.nextMaximizedImageClassName),v=b,r[v].classList.add(w.styles.currentMaximizedImageClassName),r[l(v)].classList.add(w.styles.prevMaximizedImageClassName),r[k(v)].classList.add(w.styles.nextMaximizedImageClassName),s.classList.remove(w.styles.maximizedLayerHiddenClassName);var c=new CustomEvent("maximize",{detail:{currentMaximizedItemId:v}});o.dispatchEvent(c)},x.minimize=function(){s.classList.add(w.styles.maximizedLayerHiddenClassName)},x.next=function(){if(!s.classList.contains(w.styles.maximizedLayerHiddenClassName)){var a=k(v);x.maximize(p[a]);var b=new CustomEvent("nextItem",{detail:{currentMaximizedItemId:a}});o.dispatchEvent(b)}},x.prev=function(){if(!s.classList.contains(w.styles.maximizedLayerHiddenClassName)){var a=l(v);x.maximize(p[a]);var b=new CustomEvent("prevItem",{detail:{currentMaximizedItemId:a}});o.dispatchEvent(b)}},x.getCurrentItemId=function(){return v},x.thumbPanel={},function(){function a(a){for(var d=b.getElementsByClassName(w.styles.currentMaximizedImageClassName),e=d.length-1;e>=0;e--)d[e].classList.remove(w.styles.currentMaximizedImageClassName);c[a.detail.currentMaximizedItemId].classList.add(w.styles.currentMaximizedImageClassName)}var b,c;x.thumbPanel.init=function(){b=o.cloneNode(!0),b.id="",b.classList.add(w.styles.thumbPanelClassName),s.appendChild(b),c=b.getElementsByClassName(w.styles.elementsClassName);for(var d=c.length-1;d>=0;d--)c[d].addEventListener("click",m,!1);x.addEventListener("maximize",a)},x.thumbPanel.destroy=function(){s.removeChild(b),x.removeEventListener("maximize",a)}}(),x.touch={},function(){function a(){g=document.createElement("div"),h=document.createElement("a"),h.innerText=w.closeButtonText,h.classList.add(w.styles.closeButtonClassName),g.appendChild(h),g.classList.add(w.styles.topBarClassName),s.appendChild(g)}function b(a){f=a.changedTouches[0].screenX}function c(a){a.preventDefault();var b=a.changedTouches[0].screenX-f;r[x.getCurrentItemId()].style.webkitTransform="translate("+b+"px, 0px)"}function d(a){r[x.getCurrentItemId()].style.webkitTransform="",f>a.changedTouches[0].screenX?x.next():x.prev()}function e(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}var f,g,h;x.touch.init=function(){e()&&(s.addEventListener("touchstart",b),s.addEventListener("touchmove",c),s.addEventListener("touchend",d),s.classList.add("touch-supported"),a(),h.addEventListener("click",x.minimize))}}(),c(this)}return a});